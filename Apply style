const applyStyles = (stylesObj, parentSelector = '') => {
  const classMapping = {};

  Object.entries(stylesObj).forEach(([className, styleValue]) => {
    const selector = `${parentSelector} .${className}`;
    const uniqueClassName = generateUniqueClassName();

    const styleElement = document.createElement('style');
    let styleRules = '';

    if (typeof styleValue === 'object' && !Array.isArray(styleValue)) {
      // Process media query styles
      styleRules = applyStyles(styleValue, selector);
    } else {
      // Process regular CSS properties
      Object.entries(styleValue).forEach(([key, value]) => {
        styleRules += `${convertToCssSyntax(key)}: ${value}; `;
      });
    }

    styleElement.innerHTML = `${selector} { ${styleRules} }`;
    document.head.appendChild(styleElement);

    classMapping[className] = uniqueClassName;
  });

  return classMapping;
};
