const applyStyles = (stylesObj, parentSelector = '') => {
  Object.keys(stylesObj).forEach((className) => {
    const selector = `${parentSelector} .${className}`;
    const styleValue = stylesObj[className];

    const uniqueClassName = generateUniqueClassName();

    const styleElement = document.createElement('style');
    const styleRules = Object.entries(styleValue)
      .map(([key, value]) => {
        if (typeof value === 'object' && !Array.isArray(value)) {
          // Process media query styles
          const mediaQueryStyles = applyStyles({ [key]: value }, selector);
          return mediaQueryStyles;
        }
        return `${key}: ${value};`;
      })
      .join(' ');

    styleElement.innerHTML = `${selector} { ${styleRules} }`;
    document.head.appendChild(styleElement);

    classMapping[className] = uniqueClassName;
  });
};
