
const applyStyles = (stylesObj, parentSelector = '', componentName) => {
  const styleElement = document.createElement('style');
  document.head.appendChild(styleElement);
  const styleSheet = styleElement.sheet;

  const generateUniqueClassName = (className) => {
    const uniqueId = Math.random().toString(36).substring(2, 7);
    return `custom-class-${componentName}-${className}-${uniqueId}`;
  };

  const processStyleObject = (styleObj, selector) => {
    Object.entries(styleObj).forEach(([key, value]) => {
      if (typeof value === 'object') {
        const nestedSelector = key.startsWith('@media') ? key : `${selector} ${key}`;
        processStyleObject(value, nestedSelector);
      } else {
        const cssProperty = convertToCssSyntax(key);
        const cssValue = value;
        const rule = `${selector} { ${cssProperty}: ${cssValue}; }`;
        styleSheet.insertRule(rule, styleSheet.cssRules.length);
      }
    });
  };

  Object.entries(stylesObj).forEach(([className, styleValue]) => {
    const selector = `${parentSelector} .${className}`;
    const uniqueClassName = generateUniqueClassName(className);
    processStyleObject(styleValue, `.${uniqueClassName}`);
    _classMapping[className] = uniqueClassName;
  });
};
